# Basic Pentesting 

<br>

## Escaneo de puertos

Iniciamos el proceso con un escaneo mediante **Nmap** con el objetivo de identificar los puertos abiertos y los servicios activos en el sistema objetivo.

![1.png](_resources/1.png)

El escaneo revela los siguientes puertos abiertos en la máquina objetivo:

- **22/TCP** (SSH)
- **80/TCP** (HTTP)
- **139/TCP** (SMB)
- **445/TCP** (SMB)
- **8009/TCP** (Apache JServ)
- **8080/TCP** (HTTP)

Procedemos a investigar el puerto **80** a través de nuestro navegador, lo que nos condujo a la siguiente página:

![2.png](_resources/2.png)

Al explorar el puerto **8080**, encontramos una página distinta a la anterior.

![3.png](_resources/3.png)

Para identificar posibles directorios ocultos en el sitio web, empleamos la herramienta **Gobuster**.

![4.png](_resources/4.png)

El escaneo revela la presencia de un directorio denominado "*development*". Dentro de este, se identificaron dos archivos: "**dev.txt**" y "**j.txt**".

![5.png](_resources/5.png)

Al revisar el archivo "*dev.txt*", encontramos conversaciones entre los usuarios **\-J** y **\-K**, además de confirmar que la versión de Apache utilizada es la 2.5.12.

![6.png](_resources/6.png)

En el archivo "*j.txt*", se menciona que la contraseña del usuario **\-J** es vulnerable, lo que nos proporciona una pista valiosa para continuar con el ataque.

![7.png](_resources/7.png)

<br>

## Enumeración y explotación SMB

Con el fin de obtener información adicional sobre el servicio SMB, empleamos un script de **Nmap**.

![8.png](_resources/8.png)

El escaneo identifica un recurso compartido denominado "*/Anonymous*", al cual es posible acceder utilizando el usuario "**anonymous**".

![9.png](_resources/9.png)

![10.png](_resources/10.png)

Dentro de este recurso, encontramos referencias a los usuarios **Jan** y **Kay**. Dado que conocemos la debilidad de la contraseña de **Jan**, procedemos a intentar descifrarla utilizando *Hydra*.

![11.png](_resources/11.png)

Hydra consigue descifrar la contraseña de Jan, lo que nos permite iniciar una sesión SSH con éxito.  

<br/>

## Escalada de privilegios

Nos conectamos a través de SSH con el usuario **Jan** y, al explorar el sistema, descubrimos que el usuario **Kay** tiene claves RSA accesibles.

![12.png](_resources/12.png)

Procedemos a copiar la clave privada y la almacenamos en un archivo denominado "test.txt" en nuestra máquina atacante.

![13.png](_resources/13.png)

Intentamos establecer la conexión utilizando la clave privada, pero descubrimos que está protegida por una frase de contraseña.

![14.png](_resources/14.png)

Para descifrar la frase de contraseña, utilizamos **John the Ripper** junto con *ssh2john*. Procedimos a convertir la clave en un hash de la siguiente manera:

![15.png](_resources/15.png)

A continuación, empleamos John the Ripper junto con el diccionario "*rockyou.txt*" para intentar descifrar la frase de contraseña.

![16.png](_resources/16.png)

Una vez descifrada la frase de contraseña, logramos conectarnos exitosamente como el usuario **Kay**.

![17.png](_resources/17.png)

Una vez dentro, localizamos el archivo "*pass.bak*", que contiene la contraseña final.

![18.png](_resources/18.png)